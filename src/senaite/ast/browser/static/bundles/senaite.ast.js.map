{"version":3,"file":"senaite.ast.js","mappings":"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","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///external var \"jQuery\"","webpack:///./components/astpanelassign.coffee","webpack:///./senaite.ast.js","webpack:///./scss/senaite.ast.scss?baa4"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import $ from \"jquery\"\n\n###\nController for the assignment of an AST panel to a Sample\n###\nclass ASTPanelAssignController\n\n  constructor: ->\n    @ast_panel_selector = \"select[id=ast_panel_selector]\"\n    @ast_panel_add_button =  \"button[id=astpanel_add]\"\n    @ast_panel_listing = \"div[data-form_id='ast_analyses']\"\n\n    # Do not load this controller unless required\n    return unless @is_required()\n\n    @debug \"load\"\n\n    # Bind the event handler to the elements\n    @bind_event_handler()\n\n    return @\n\n  ###\n  Binds callbacks on elements\n  Attaches all the events to the body and refine the selector to delegate the\n  event: https://learn.jquery.com/events/event-delegation/\n  ###\n  bind_event_handler: =>\n    @debug \"bind_event_handler\"\n    $(\"body\").on \"click\", @ast_panel_add_button, @on_add_click\n\n  ###\n  Event triggered when the button \"add\" next to ast panel selector is clicked\n  System automatically adds the AST analyses to the sample based on the\n  configuration of the selected panel\n  ###\n  on_add_click: (event) =>\n    event.preventDefault()\n    @debug \"on_add_click\"\n    el = event.currentTarget\n\n    # Get the selected panel\n    selector = @get_panel_selector()\n    panel_uid = selector.value\n    return unless panel_uid\n\n    # Call the assignment endpoint\n    @add_ast_panel panel_uid\n    .done (data) ->\n      # Update the analyses listing\n      listing = document.querySelector @ast_panel_listing\n      @debug listing\n      event = new Event \"reload\"\n      listing.dispatchEvent event\n\n  ###\n  Adds the panel to current context\n  ###\n  add_ast_panel: (panel_uid) =>\n    @debug \"add_ast_panel:panel_uid:#{ panel_uid }\"\n    deferred = $.Deferred()\n    options =\n      url: @get_current_url()+\"/add_ast_panel\"\n      data:\n        panel_uid: panel_uid\n\n    @ajax_submit options\n    .done (data) ->\n      return deferred.resolveWith this, [[]]\n\n    deferred.promise()\n\n  ###\n  Ajax Submit with automatic event triggering and some sane defaults\n  ###\n  ajax_submit: (options={}) =>\n    @debug \"ajax_submit\"\n\n    # some sane option defaults\n    options.type ?= \"POST\"\n    options.context ?= this\n    options.data ?= {}\n    options._authenticator ?= $(\"input[name='_authenticator']\").val()\n\n    @debug \">>> ajax_submit::options=\", options\n\n    $(this).trigger \"ajax:submit:start\"\n    done = ->\n      $(this).trigger \"ajax:submit:end\"\n    return $.ajax(options).done done\n\n  ###\n  Returns whether this controller needs to be loaded or not\n  ###\n  is_required: =>\n    return @get_panel_selector()?\n\n  ###\n  Returns the panel selector element\n  ###\n  get_panel_selector: =>\n    return document.querySelector @ast_panel_selector\n\n  ###\n  Returns the current url\n  ###\n  get_current_url: =>\n    location = window.location\n    protocol = location.protocol\n    host = location.host\n    pathname = location.pathname\n    return \"#{protocol}//#{host}#{pathname}\"\n\n  ###\n  Prints a debug message in console with this component name prefixed\n  ###\n  debug: (message) =>\n    console.debug \"[senaite.ast]\", \"ASTPanelAssignController::#{ message }\"\n\nexport default ASTPanelAssignController\n","import ASTPanelAssignController from \"./components/astpanelassign.coffee\"\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  console.debug(\"*** SENAITE AST JS LOADED ***\");\n\n  // Initialize controllers\n  window.ast_panel_assign = new ASTPanelAssignController();\n\n});\n","// extracted by mini-css-extract-plugin\nexport {};"],"names":["ASTPanelAssignController","$","_classCallCheck","bind_event_handler","bind","on_add_click","add_ast_panel","ajax_submit","is_required","get_panel_selector","get_current_url","debug","ast_panel_selector","ast_panel_add_button","ast_panel_listing","_createClass","key","value","on","event","el","panel_uid","selector","preventDefault","currentTarget","done","data","listing","document","querySelector","Event","dispatchEvent","deferred","options","concat","Deferred","url","resolveWith","promise","arguments","length","undefined","type","context","_authenticator","val","trigger","ajax","host","location","pathname","protocol","window","message","console","addEventListener","ast_panel_assign"],"sourceRoot":""}